begin
  desc "Parse and display a markdown file" 
  task :markdown do
      require 'rdiscount'
      files = Dir.glob("*.{md,markdown}")
    
      if files.size == 1
        file = files.first
      else
        print "Enter filename: "
        file = $stdin.gets.chop
      end
    
      markdown = RDiscount.new(File.read(file))
      File.open("/tmp/markdown.html", 'w') { |f| f.write(markdown.to_html) }
      system "open /tmp/markdown.html"
  end
rescue LoadError => err
  warn "Couldn't load gem rdiscount: #{err}"
end
